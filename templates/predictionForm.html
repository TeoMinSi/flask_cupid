<!DOCTYPE html>
<html lang="en">
<head>
  <!-- <link rel="shortcut icon" type="image/x-icon" href="/dist/img/favicon.ico" /> -->
  <link rel="icon" href="/dist/img/favicon.ico" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MarTechX - Data Analytics Platform</title>

  <script type="text/javascript" src="/dist/js/jquery-3.5.1.min.js"></script>
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">

  <!-- Select2 -->
  <link rel="stylesheet" href="../../plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="../../plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">

  <!-- Theme style -->
  <link rel="stylesheet" href="../../dist/css/adminlte.min.css">


    <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap5.min.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap5.min.js"></script>
</head>
<body class="hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">
    
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
          </li>
          <!-- <li class="nav-item d-none d-sm-inline-block">
            <a href="index3.html" class="nav-link">Home</a>
          </li> -->
          <!-- <li class="nav-item d-none d-sm-inline-block">
            <a href="#" class="nav-link">Contact</a>
          </li> -->
        </ul>
    
        <!-- SEARCH FORM -->
        <form class="form-inline ml-3">
          <div class="input-group input-group-sm">
            <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
              <button class="btn btn-navbar" type="submit">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
        </form>
    
        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
          <!-- Messages Dropdown Menu -->
          <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" href="#">
              <i class="far fa-comments"></i>
              <span class="badge badge-danger navbar-badge">3</span>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
              <a href="#" class="dropdown-item">
                <!-- Message Start -->
                <div class="media">
                  <!-- <img src="/dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle"> -->
                  <div class="media-body">
                    <h3 class="dropdown-item-title">
                      Brad Diesel
                      <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                    </h3>
                    <p class="text-sm">Call me whenever you can...</p>
                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                  </div>
                </div>
                <!-- Message End -->
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <!-- Message Start -->
                <div class="media">
                  <!-- <img src="/dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3"> -->
                  <div class="media-body">
                    <h3 class="dropdown-item-title">
                      John Pierce
                      <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                    </h3>
                    <p class="text-sm">I got your message bro</p>
                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                  </div>
                </div>
                <!-- Message End -->
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <!-- Message Start -->
                <div class="media">
                  <!-- <img src="/dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3"> -->
                  <div class="media-body">
                    <h3 class="dropdown-item-title">
                      Nora Silvester
                      <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                    </h3>
                    <p class="text-sm">The subject goes here</p>
                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                  </div>
                </div>
                <!-- Message End -->
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
            </div>
          </li>
          <!-- Notifications Dropdown Menu -->
          <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" href="#">
              <i class="far fa-bell"></i>
              <span class="badge badge-warning navbar-badge">15</span>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
              <span class="dropdown-item dropdown-header">15 Notifications</span>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <i class="fas fa-envelope mr-2"></i> 4 new messages
                <span class="float-right text-muted text-sm">3 mins</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <i class="fas fa-users mr-2"></i> 8 friend requests
                <span class="float-right text-muted text-sm">12 hours</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <i class="fas fa-file mr-2"></i> 3 new reports
                <span class="float-right text-muted text-sm">2 days</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-widget="fullscreen" href="#" role="button">
              <i class="fas fa-expand-arrows-alt"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
              <i class="fas fa-th-large"></i>
            </a>
          </li>
        </ul>
      </nav>
      <!-- /.navbar -->
    
      <!-- Main Sidebar Container -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4" style="background-color:#fff;"> 
        <!-- Brand Logo -->
        <a href="/index.html" class="brand-link">
          <img id="logo" src="logo2.png" alt="AdminLTE Logo" style="
          height: 67px;
          opacity: .8;
          position: relative;
          right: -25px;" >
          <!-- <span class="brand-text font-weight-light">CitiBank</span> -->
        </a>
    
        <!-- Sidebar -->
        <div class="sidebar">

    
          <!-- Sidebar Menu -->
          <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
            
             
              <li class="nav-item">
                <a href="/index.html" class="nav-link sideMenuPages">
                    <i class="nav-icon fas fa-tachometer-alt"></i>
                    <p style="font-weight: bold;">
                      Customer Dashboard
                    </p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/flask/templates/merchants.html" class="nav-link sideMenuPages">
                  <!-- change icon here-->
                  <!-- <i class="nav-icon far fa-image"></i> -->
                  <i class="nav-icon fas fa-users"></i>
                  <p style="font-weight: bold;">
                    Merchants Analysis
                  </p>
                </a>
              </li>
    
    
              <li class="nav-item">
                <a href="/flask/templates/inputData.html" class="nav-link sideMenuPages">
                  <!-- change icon here-->
                  <!-- <i class="nav-icon far fa-image"></i> -->
                  &nbsp;&nbsp;<i class="fab fa-wpforms"></i>
                  <p style="font-weight: bold;">
                    &nbsp;&nbsp;&nbsp;Upload Data
                  </p>
                </a>
              </li>
    
              <li class="nav-item">
                <a href="/flask/templates/predictionForm.html" class="nav-link sideMenuPages">
                  <!-- change icon here-->
                  <!-- <i class="nav-icon far fa-image"></i> -->
                  &nbsp;&nbsp;<i class="fab fa-wpforms"></i>
                  <p style="font-weight: bold;">
                    &nbsp;&nbsp;&nbsp;Data Prediction Form
                  </p>
                </a>
              </li>
    
              <li class="nav-item">
                <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                  <i class="nav-icon far fas fa-database"></i>
                  <p style="font-weight: bold;">
                    Data Tables
                  </p>
                </a>
                <ul class="collapse list-unstyled  nav" id="pageSubmenu">
    
                  <li class="nav-item">
                    <a href="/flask/templates/cleanRawDataTable.html" class="nav-link sideMenuPages" style="right:-15px !important;">
                      <i class="fas fa-table"></i>
                      <p style="font-size: 12px; font-weight:bold;">
                        Cleaned Raw Data Table
                      </p>
                    </a>
                  </li>
    
                    <li class="nav-item">
                        <a href="/flask/templates/customerDataTable.html" class="nav-link sideMenuPages" style="right:-15px !important;">
                          <i class="fas fa-table"></i>
                          <p style="font-size: 12px; font-weight:bold;">
                            Customer Data Table
                          </p>
                        </a>
                    </li>
    
                    <li class="nav-item">
                      <a href="/flask/templates/merchantFrequencyDataTable.html" class="nav-link sideMenuPages" style="right:-15px !important;">
                        <i class="fas fa-table"></i>
                        <p style="font-size: 12px; font-weight:bold;">
                          Merchant Frequency Data Table
                        </p>
                      </a>
                    </li>
    
                    <li class="nav-item">
                      <a href="/flask/templates/merchantScoreDataTable.html" class="nav-link sideMenuPages" style="right:-15px !important;">
                        <i class="fas fa-table"></i>
                        <p style="font-size: 12px; font-weight:bold;">
                          Merchant Score Data Table
                        </p>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a href="/flask/templates/mbaDataTable.html" class="nav-link sideMenuPages" style="right:-15px !important;">
                        <i class="fas fa-table"></i>
                        <p style="font-size: 12px; font-weight:bold;">
                          Market Basket Analysis Data Table
                        </p>
                      </a>
                    </li>
                </ul>
            </li>
    
    
              <li class="nav-item">
                <a href="/flask/templates/help.html" class="nav-link sideMenuPages">
                  <i class="nav-icon fas fa-question"></i>
                  <p style="font-weight: bold;">
                    Help
                  </p>
                </a>
              </li>
              
          </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
      </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 id="pageTitle">Data Prediction Form</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item">Home</li>
              <li class="breadcrumb-item active">Data Prediction Form</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <!-- SELECT2 EXAMPLE -->
        <div class="card card-default">
        <div class="row">
          <div class="col-md-12">
            <div class="card card-default">
              <div class="card-header">
                <!-- <h3 class="card-title">Data Configuration</h3> -->
              </div>
              <div class="card-body">
          <div id="accordion">
            <div class="card">
              <!-- <div class="card-header" id="headingOne">
                <h5 class="mb-0">
                  <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    
                  </button>
                </h5>
              </div> -->
          
              <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                <div class="card-body">

                  <div class="form-group">
                    <label>Age</label>
                    <select id="ddlAgeGroup" class="form-control" style="width: 100%;" name="ageGroup">
                      <option value="Select Age" selected="selected">Select Age</option>
                      <option>&lt; 20 years old</option>
                      <option>21-30 years old</option>
                      <option>31-40 years old</option>
                      <option>41-50 years old</option>
                      <option>&gt; 50 years old </option>
                    </select>
                    <div id="ageError"></div>
                  </div>

                  <div class="form-group clearfix">
                    <label>Gender</label></br>
                    <div class="icheck-primary d-inline">
                      <input type="radio" id="radioMale" name="gender">
                      <label for="radioMale"> Male
                      </label>
                    </div>
                    <div class="icheck-primary d-inline">
                      <input type="radio" id="radioFemale" name="gender">
                      <label for="radioFemale"> Female
                      </label>
                    </div>
                    <div id="genderError"></div>
                  </div>

                  <div class="form-group">
                    <label>Region</label>
                    <select id="ddlRegion" class="form-control" style="width: 100%;" name="region">
                      <option selected="selected">	Select Region</option>
                      <option>North-East</option>
                      <option>North</option>
                      <option>East</option>
                      <option>West</option>
                      <option>Central/South</option>
                    </select>
                    <div id="regionError"></div>
                  </div>

                  <div class="form-group">
                    <label>Industry</label>
                    <select id="ddlIndustry" class="form-control" style="width: 100%;" name="industry">
                      <option selected="selected">	Select Industry</option>
                      <option>Business/HR</option>
                      <option>Construction</option>
                      <option>Consulting</option>
                      <option>Engineering</option>
                      <option>Events</option>
                      <option>Finance</option>
                      <option>Floral & Landscaping</option>
                      <option>Housewife</option>
                      <option>Humanities</option>
                      <option>Law</option>
                      <option>Life Sciences</option>
                      <option>Mathematics</option>
                      <option>Media</option>
                      <option>Medical</option>
                      <option>Oil and gas</option>
                      <option>Publishing</option>
                      <option>Real Estate and Fengshui  </option>
                      <option>Retail</option>
                      <option>Sales</option>
                      <option>Security</option>
                      <option>Services</option>
                      <option>Social Sciences</option>
                      <option>Technology</option>
                      <option>Tourism/Hospitality</option>
                      <option>Travel</option>
                      <option>Wedding</option>
                    </select>
                    <div id="industryError"></div>
                  </div>

                  <div class="form-group">
                    <label>Annual Income</label>
                    <select id="ddlAnnualIncome" class="form-control" style="width: 100%;" name="annualIncome"> 
                      <option selected="selected">	Select Annual Income</option>
                      <option>I am a Student</option>
                      <option>&lt; $20,000</option>
                      <option>$20,001 - $44,999</option>
                      <option>$45,000 - $59,999</option>
                      <option>$60,000 - $89,999</option>
                      <option>$90,000 - $120,000</option>
                      <option>&gt; $120,000</option>
                    </select>
                    <div id="annualincomeError"></div>
                  </div>

                  <div class="form-group">
                    <label>Education</label>
                    <select id="ddlEducation" class="form-control" style="width: 100%;" name="education">
                      <option selected="selected">	Select Education</option>
                      <option>Primary School</option>
                      <option>O Levels</option>
                      <option>A Levels</option>
                      <option>Diploma</option>
                      <option>University Degree</option>
                      <option>Masters Degree</option>
                      <option>PhD</option>
                    </select>
                    <div id="educationError"></div>
                  </div>

                
                  </div>
                  <div style="text-align:center;">
                    <button id="submitBtn" style="width:12%; display:inline-block; margin-bottom:10px;" class="btn btn-block btn-success">Submit Form</button>
                    <button style="width:10%; display:inline-block; margin-top:0; margin-bottom:10px" class="btn btn-block btn-info" onclick="resetFields()">Reset Fields</button>
                  </div>

              <div class="card-body">
                <table id="example2" class="table table-bordered table-hover">
                  <thead>
                  <tr>
                    <th>Predicted Category</th>
                    <th>Predicted RFM Segment</th>
                    <th>Top Merchant in Predicted Category</th>
                    <th>Associated Merchants</th>
                  </tr>
                </thead>
                </table>
              </div>

                </div>
              </div>
            </div>

          </div>
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <div class="float-right d-none d-sm-block">
      <b>Version</b> 3.1.0-pre
    </div>
    <strong>Copyright &copy; 2020 <a style="color:#0DCED7" href="/index.html">MarTechX</a>.</strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
<!-- jQuery -->
<!-- <script src="../../plugins/jquery/jquery.min.js"></script> -->
<!-- Bootstrap 4 -->
<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Select2 -->
<script src="../../plugins/select2/js/select2.full.min.js"></script>
<!-- Bootstrap4 Duallistbox -->
<script src="../../plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js"></script>
<!-- InputMask -->
<script src="../../plugins/moment/moment.min.js"></script>
<script src="../../plugins/inputmask/jquery.inputmask.min.js"></script>
<!-- date-range-picker -->
<script src="../../plugins/daterangepicker/daterangepicker.js"></script>
<!-- bootstrap color picker -->
<script src="../../plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="../../plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Bootstrap Switch -->
<script src="../../plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>

<!-- dropzonejs -->
<script src="../../plugins/dropzone/min/dropzone.min.js"></script>
<!-- AdminLTE App -->
<script src="../../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../../dist/js/demo.js"></script>
<!-- Page specific script -->
<script>

function reloadPage() {
    // The last "domLoading" Time //
    var currentDocumentTimestamp =
    new Date(performance.timing.domLoading).getTime();
    // Current Time //
    var now = Date.now();
    // Ten Seconds //
    var tenSec = 10 * 1000;
    // Plus Ten Seconds //
    var plusTenSec = currentDocumentTimestamp + tenSec;
    if (now > plusTenSec) {
    location.reload();
    } else {}
}
reloadPage();

  // Add the following code if you want the name of the file appear on select
  $(".custom-file-input").on("change", function() {
    var fileName = $(this).val().split("\\").pop();
    $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
  });
    
  $(function () {
    //Initialize Select2 Elements
    $('.select2').select2()

    //Initialize Select2 Elements
    $('.select2bs4').select2({
      theme: 'bootstrap4'
    })

    //Datemask dd/mm/yyyy
    $('#datemask').inputmask('dd/mm/yyyy', { 'placeholder': 'dd/mm/yyyy' })
    //Datemask2 mm/dd/yyyy
    $('#datemask2').inputmask('mm/dd/yyyy', { 'placeholder': 'mm/dd/yyyy' })
    //Money Euro
    $('[data-mask]').inputmask()

    //Date range picker
    $('#reservationdate').datetimepicker({
        format: 'L'
    });
    //Date range picker
    $('#reservation').daterangepicker()
    //Date range picker with time picker
    $('#reservationtime').daterangepicker({
      timePicker: true,
      timePickerIncrement: 30,
      locale: {
        format: 'MM/DD/YYYY hh:mm A'
      }
    })
    //Date range as a button
    $('#daterange-btn').daterangepicker(
      {
        ranges   : {
          'Today'       : [moment(), moment()],
          'Yesterday'   : [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
          'Last 7 Days' : [moment().subtract(6, 'days'), moment()],
          'Last 30 Days': [moment().subtract(29, 'days'), moment()],
          'This Month'  : [moment().startOf('month'), moment().endOf('month')],
          'Last Month'  : [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        },
        startDate: moment().subtract(29, 'days'),
        endDate  : moment()
      },
      function (start, end) {
        $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
      }
    )

    //Timepicker
    $('#timepicker').datetimepicker({
      format: 'LT'
    })

    //Bootstrap Duallistbox
    $('.duallistbox').bootstrapDualListbox()

    //Colorpicker
    $('.my-colorpicker1').colorpicker()
    //color picker with addon
    $('.my-colorpicker2').colorpicker()

    $('.my-colorpicker2').on('colorpickerChange', function(event) {
      $('.my-colorpicker2 .fa-square').css('color', event.color.toString());
    });

    $("input[data-bootstrap-switch]").each(function(){
      $(this).bootstrapSwitch('state', $(this).prop('checked'));
    });

  })



  localStorage.setItem("pageTitle", document.getElementById("pageTitle").innerText);
  
  pageSelected = document.getElementsByClassName("sideMenuPages")
  for (let i=0; i<pageSelected.length; i++){
    let pageName = pageSelected[i].innerText
    pageName = pageName.trim()
    let currentPage = localStorage.getItem("pageTitle");
    if (currentPage == pageName){
      document.getElementsByClassName("sideMenuPages")[i].style.color = "#0DCED7";
    }
  }



  function predictionDataResult(data){
              let oldtable =                 $('#example2').DataTable( {
                    paging: true,
                    lengthChange: false,
                    searching: false,
                    ordering: true,
                    info: true,
                    autoWidth: false,
                    responsive: true,
                    data: data,
                    retrieve:true,
                    destory:true,
                    columns: [
                          { data: 'predicted_category' },
                          { data: 'predicted_rfm_segment' },
                          { data: 'top_merchant_in_predicted_category'},
                          { data: 'associated_merchants'}
                    ]
                } );

                oldtable.destroy();
                
                $('#example2').DataTable( {
                    paging: true,
                    lengthChange: false,
                    searching: false,
                    ordering: true,
                    info: true,
                    autoWidth: false,
                    responsive: true,
                    data: data,
                    retrieve:true,
                    destory:true,
                    columns: [
                          { data: 'predicted_category' },
                          { data: 'predicted_rfm_segment' },
                          { data: 'top_merchant_in_predicted_category'},
                          { data: 'associated_merchants'}
                    ]
                } );
                
            }

          const Url = 'https://flaskcupid.herokuapp.com/formdata'
            $('#submitBtn').click(function(){
              console.log("clicked")
                document.getElementById("ageError").innerHTML = "";
                document.getElementById("genderError").innerHTML = "";
                document.getElementById("regionError").innerHTML = "";
                document.getElementById("industryError").innerHTML = "";
                document.getElementById("annualincomeError").innerHTML = "";
                document.getElementById("educationError").innerHTML = "";

                let age = ""
                if(document.getElementById("ddlAgeGroup").options[document.getElementById("ddlAgeGroup").selectedIndex].text == "Select Age"){
                  document.getElementById("ageError").innerHTML = "Required Field";
                  document.getElementById("ageError").style.color = "red";
                  document.getElementById("ageError").style.fontStyle = "italic";
                  document.getElementById("ageError").style.fontFamily = "inherit";
                  document.getElementById("ageError").style.fontSize = "15px";
                }else{
                  age = document.getElementById("ddlAgeGroup").options[document.getElementById("ddlAgeGroup").selectedIndex].text;
                }
                
                let gender=""
                if (!document.getElementById("radioMale").checked && !document.getElementById("radioFemale").checked){
                  document.getElementById("genderError").innerHTML = "Required Field";
                  document.getElementById("genderError").style.color = "red";
                  document.getElementById("genderError").style.fontStyle = "italic";
                  document.getElementById("genderError").style.fontFamily = "inherit";
                  document.getElementById("genderError").style.fontSize = "15px";
                }else{
                  if(document.getElementById("radioMale").checked){
                  gender = "Male"
                }else if(document.getElementById("radioFemale").checked){
                  gender = "Female"
                } 
                }

                let region = ""
                if(document.getElementById("ddlRegion").options[document.getElementById("ddlRegion").selectedIndex].text == "Select Region"){
                  document.getElementById("regionError").innerHTML = "Required Field";
                  document.getElementById("regionError").style.color = "red";
                  document.getElementById("regionError").style.fontStyle = "italic";
                  document.getElementById("regionError").style.fontFamily = "inherit";
                  document.getElementById("regionError").style.fontSize = "15px";
                }else{
                  region = document.getElementById("ddlRegion").options[document.getElementById("ddlRegion").selectedIndex].text;
                }

                // let region = document.getElementById("ddlRegion").options[document.getElementById("ddlRegion").selectedIndex].text;

                
                let industry = ""
                if(document.getElementById("ddlIndustry").options[document.getElementById("ddlIndustry").selectedIndex].text == "Select Industry"){
                  document.getElementById("industryError").innerHTML = "Required Field";
                  document.getElementById("industryError").style.color = "red";
                  document.getElementById("industryError").style.fontStyle = "italic";
                  document.getElementById("industryError").style.fontFamily = "inherit";
                  document.getElementById("industryError").style.fontSize = "15px";
                }else{
                  industry = document.getElementById("ddlIndustry").options[document.getElementById("ddlIndustry").selectedIndex].text;
                }

                // let industry = document.getElementById("ddlIndustry").options[document.getElementById("ddlIndustry").selectedIndex].text;

                // let annualIncome = document.getElementById("ddlAnnualIncome").options[document.getElementById("ddlAnnualIncome").selectedIndex].text;

                let annualIncome = ""
                if(document.getElementById("ddlAnnualIncome").options[document.getElementById("ddlAnnualIncome").selectedIndex].text == "Select Annual Income"){
                  document.getElementById("annualincomeError").innerHTML = "Required Field";
                  document.getElementById("annualincomeError").style.color = "red";
                  document.getElementById("annualincomeError").style.fontStyle = "italic";
                  document.getElementById("annualincomeError").style.fontFamily = "inherit";
                  document.getElementById("annualincomeError").style.fontSize = "15px";
                }else{
                  annualIncome = document.getElementById("ddlAnnualIncome").options[document.getElementById("ddlAnnualIncome").selectedIndex].text;
                }

                // let education = document.getElementById("ddlEducation").options[document.getElementById("ddlEducation").selectedIndex].text;
                let education = ""
                if(document.getElementById("ddlEducation").options[document.getElementById("ddlEducation").selectedIndex].text == "Select Education"){
                  document.getElementById("educationError").innerHTML = "Required Field";
                  document.getElementById("educationError").style.color = "red";
                  document.getElementById("educationError").style.fontStyle = "italic";
                  document.getElementById("educationError").style.fontFamily = "inherit";
                  document.getElementById("educationError").style.fontSize = "15px";
                }else{
                  education = document.getElementById("ddlEducation").options[document.getElementById("ddlEducation").selectedIndex].text;
                }
                

                //if there is no errors, then you submit
                if(!document.getElementById("ageError").innerHTML && !document.getElementById("genderError").innerHTML && !document.getElementById("regionError").innerHTML && !document.getElementById("industryError").innerHTML && !document.getElementById("annualincomeError").innerHTML && !document.getElementById("educationError").innerHTML){
                  console.log("what is industry here?",industry) 
                  let data = {
                  'age': age,
                  'gender': gender,
                  'region': region,
                  'industry': industry,
                  'income': annualIncome,
                  'education': education,
                }

                $.ajax({
                    url:Url,
                    type:"GET",
                    data:data,
                    headers: { 'Access-Control-Allow-Origin':'*' },
                    complete: function(){
                    alert("Form submitted!")
                    },
                success:function(result){
                    console.log("initial result: ", result)
                    let predictedCategory = []
                    let predictedRFMSegment
                    let topMerchant = []
                    let associatedMerchants = []
                    let categoryMerchantPair
                
                    for (let i=0; i<result.length; i++){
                      let arr = result[i].category_merchant_pair
                      predictedRFMSegment = result[i].predicted_rfm_segment
                      for(let key in arr){
                        predictedCategory.push(key)
                        let value = arr[key].split(' -> ');
                        let tMerchant = value[0];
                        let aMerchant = value[1];
                        console.log("tMerchant: ",tMerchant)
                        topMerchant.push(tMerchant)
                        console.log("aMerchant: ", aMerchant)
                        associatedMerchants.push(aMerchant)
                      }
                    }

                    // console.log("test",categoryMerchantPair)
                    let outputData = []
                    console.log("???",topMerchant.length)
                    if (topMerchant.length == 0){
                      let output = {
                        predicted_category: 'None',
                        predicted_rfm_segment: predictedRFMSegment,
                        top_merchant_in_predicted_category: 'None',
                        associated_merchants: 'None'
                        } 
                        outputData.push(output)

                    }else{
                      for (let j = 0; j<topMerchant.length; j++){
                        let output = {
                        predicted_category: predictedCategory[j],
                        predicted_rfm_segment: predictedRFMSegment,
                        top_merchant_in_predicted_category: topMerchant[j],
                        associated_merchants: associatedMerchants[j]
                        } 
                        outputData.push(output)
                        }
                    }

                    predictionDataResult(outputData)
                },
                error:function(error){
                    console.log(error)
                    console.log(`Error ${error}`)
                }
                })
                }

            })

            document.addEventListener('DOMContentLoaded', function() {
              // displayData()
            }, false);



        function resetFields() {  
          console.log("clicked")
          let ddlAgeGroup = document.getElementById("ddlAgeGroup");  
          ddlAgeGroup.selectedIndex = 0;

          let gender = document.getElementsByName("gender");
          for(var i=0;i<gender.length;i++)
              gender[i].checked = false;

          let ddlRegion = document.getElementById("ddlRegion");
          ddlRegion.selectedIndex = 0;

          let ddlIndustry = document.getElementById("ddlIndustry");
          ddlIndustry.selectedIndex = 0;

          let ddlAnnualIncome = document.getElementById("ddlAnnualIncome");
          ddlAnnualIncome.selectedIndex = 0;

          let ddlEducation = document.getElementById("ddlEducation");
          ddlEducation.selectedIndex = 0;
        }  

</script>
</body>
</html>
